/**
Script: fxSlide.js
	fxSlide (Slideshow) - A very flexible, but simple mootools javascript plugin to slide and animate images or multiple images at once.
	
Version:
	0.3.14

License:
	MIT License (http://www.opensource.org/licenses/mit-license.php)
	
Github:
	https://github.com/iocron/mootools-fxSlide

Copyright:
	Copyright (c) 2009-2013 [ioCron](http://www.iocron.com) and [Pixelmount]http://www.pixelmount.com

Author:
	Sebastian Marek Pieczona

Dependencies:
	Mootools 1.2 Core (or higher): Fx.Tween, Selectors, Element.Dimensions
*/

var fxSlide=new Class({Implements:[Options,Events],options:{elements:[],tabs:true,buttons:true,imageContainer:"ul",imageElement:"li",slideEffect:"slide",slideDuration:850,slideTransition:false,slideDirection:"x",slideSize:1,slideStep:"auto",slideStart:0,slideStartRandom:false,slideAuto:true,slideAutoInterval:6000,slideAutoOnHoverIn:"stop",slideAutoOnHoverOut:"start",slideCallback:function(){},initCallback:function(){}},initialize:function(b){var a=this;this.setOptions(b);this.options.elements.each(function(c,d){a.initSlide(c)})},initSlide:function(e){var b=this;var a=e;this.slide=e;if(this.options.slideStep=="auto"){this.options.slideStep=this.options.slideSize}a.options=this.options;a.slideAuto=this.options.slideAuto;a.slideDirectionXY=(this.options.slideDirection=="y")?"y":"x";a.slideDirectionCSS1=(this.options.slideDirection=="y")?"top":"left";a.slideDirectionCSS2=(this.options.slideDirection=="y")?"height":"width";a.slideDirectionCSS3=(this.options.slideDirection=="y")?"vertical":"horizontal";a.slideMode="strict";a.content=a.getElement(".fxContent");a.ul=a.content.getElement(this.options.imageContainer);a.li=a.ul.getElements(this.options.imageElement);a.liLength=a.li.length;a.liFirstElement=a.li[0].addClass("first");a.liLastElement=a.li[a.liLength-1].addClass("last");a.imageDifferenceWidth=a.liFirstElement.getStyle((this.options.slideDirection=="y")?"margin-bottom":"margin-right").toInt();a.liSize=a.liFirstElement.getSize();a.liWidth=a.liSize[a.slideDirectionXY]+a.imageDifferenceWidth;a.liSteps=Math.ceil(a.liLength/this.options.slideSize);a.contentWidth=(a.liFirstElement.getStyle("width").toInt()+a.imageDifferenceWidth)*a.liLength;a.contentOverflowWidth=a.liWidth*this.options.slideSize;a.buttons=new Element("div",{"class":"fxButtons"}).inject(a.content,"before");a.buttonsPrev=new Element("a",{"class":"fxButtonsBtn fxPrev",text:"Prev"}).inject(a.buttons);a.buttonsNext=new Element("a",{"class":"fxButtonsBtn fxNext",text:"Next"}).inject(a.buttons);a.navCurrent=(this.options.slideStartRandom)?0+parseInt(Math.random()*(a.liLength-this.options.slideSize+1)):this.options.slideStart;a.fx=new Fx.Tween(a.ul,{duration:this.options.slideDuration,link:"chain",transition:this.options.slideTransition});a.tabs=(a.getElement(".fxTabs")!=undefined)?a.getElement(".fxTabs"):new Element("div",{"class":"fxTabs",html:"<ul></ul>"});a.slideNeeded=a.liLength>this.options.slideSize?true:false;switch(this.options.slideEffect){case"slide":break;case"alpha":break;default:break}if(a.slideDirectionXY=="y"){a.buttons.setStyle("width",a.liSize["x"]+"px")}else{a.buttons.setStyle("height",a.liSize["y"]+"px")}if(!this.options.tabs||a.liSteps<=1){a.tabs.setStyle("display","none")}else{if(this.options.tabs&&a.tabs.getElement("ul li")==undefined){var d=a.liSteps;a.tabs.inject(a,"top");for(i=0;i<d;i++){new Element("li",{html:"<a href='#'>"+(i+1)+"</a>"}).inject(a.tabs.getElement("ul"))}}}a.ul.setStyle(a.slideDirectionCSS2,a.contentWidth+"px");([a.content,a.buttons]).each(function(f,g){f.setStyle(a.slideDirectionCSS2,a.contentOverflowWidth-a.imageDifferenceWidth+"px")});a.buttons.setStyle("display",(a.liSteps>1&&this.options.buttons)?"block":"none");a.tabs.setStyle("width",a.contentOverflowWidth-a.imageDifferenceWidth+"px");a.addClass(a.slideDirectionCSS3);a.addClass(this.options.slideEffect);if(this.options.buttons){a.buttonsPrev.addEvent("click",this.prevSlide.bind(this));a.buttonsNext.addEvent("click",this.nextSlide.bind(this))}else{a.buttons.setStyle("display","none")}if(this.options.tabs&&a.tabs){var c=a.tabs.getElements("li a").length>0?a.tabs.getElements("li a"):a.tabs.getElements("li");c.each(function(f,g){f.addEvents({click:function(h){h.stop();b.showSlide(b.varNavCurrent("strict",g))},focus:function(h){this.blur()}})})}this.showSlide(a.navCurrent,0);this.autoSlideEvents();this.autoSlideStart();this.options.initCallback(b)},autoSlideEvents:function(){var b=this;var a=this.slide;([a.buttons,a.ul,a.tabs]).each(function(c,d){c.addEvent("mouseenter",function(){if(b.options.slideAutoOnHoverIn=="start"&&b.options.slideAutoOnHoverOut!="start"){b.autoSlideStart()}else{if(b.options.slideAutoOnHoverIn=="stop"){b.autoSlideStop()}}});c.addEvent("mouseleave",function(){if(b.options.slideAutoOnHoverOut=="start"&&b.options.slideAutoOnHoverIn!="start"){b.autoSlideStart()}else{if(b.options.slideAutoOnHoverOut=="stop"){b.autoSlideStop()}}})})},autoSlideStart:function(){var a=this.slide;if(a.slideAuto){this.autoSlideStop();a.slideAutoID=(function(){if(this.options.slideAuto){this.nextSlide()}}).periodical(this.options.slideAutoInterval,this,a)}},autoSlideStop:function(){var a=this.slide;if(a.slideAuto){window.clearInterval(a.slideAutoID)}},prevSlide:function(){this.showSlide(this.varNavCurrent("prev"),this.options.slideDuration)},nextSlide:function(){this.showSlide(this.varNavCurrent("next"),this.options.slideDuration)},showSlide:function(d,f){var c=this;var b=this.slide;var e=(f||f==0)?f:this.options.slideDuration;var a=this.options.slideEffect;if(b.slideNeeded){b.navCurrent=d;switch(a){case"slide":this.effectSlide(d,e,b);break;case"alpha":this.effectAlpha(d,e,b);break;default:this[a](c,b,d,e,a,b.slideMode);break}this.effectTabs(d,b);this.options.slideCallback(c,b,d,e,a,b.slideMode)}},effectTabs:function(b,a){if(this.options.tabs&&a.tabs){var d=Math.ceil(a.navCurrent/this.options.slideSize);var c=a.tabs.getElements("ul li");c.removeClass("active");if(c[d]){c[d].addClass("active")}}},effectSlide:function(b,c,a){a.fx.options.duration=c;a.fx.start(a.slideDirectionCSS1,-a.li[b].getPosition(a.ul)[a.slideDirectionXY]+"px")},effectAlpha:function(b,c,a){},varNavCurrent:function(f,b){var a=this.slide;var e=e||e==0?b:a.navCurrent;var c=this.options.slideSize;var d=this.options.slideStep;switch(f){case"prev":if(e==0){e=a.liLength-c}else{if(e-d-1<0){e=0}else{e-=d}}a.slideMode="prev";break;case"next":if(e==a.liLength-c){e=0}else{if(e+d>a.liLength-c){e=a.liLength-c}else{e+=d}}a.slideMode="next";break;case"strict":if(b==0){e=0}else{if(b*d>a.liLength-c){e=a.liLength-d}else{e=b*d}}a.slideMode="strict";break;default:break}return e}});