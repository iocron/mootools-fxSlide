/**
Script: fxSlide.js
	fxSlide (Slideshow) - A very flexible, but simple mootools javascript plugin to slide and animate images or multiple images at once.
	
Version:
	0.3.9

License:
	MIT License (http://www.opensource.org/licenses/mit-license.php)

Copyright:
	Copyright (c) 2009-2013 [ioCron](http://www.iocron.com) and [Pixelmount]http://www.pixelmount.com

Author:
	Sebastian Marek Pieczona

Dependencies:
	Mootools 1.2 Core (or higher): Fx.Tween, Selectors, Element.Dimensions
*/

var fxSlide=new Class({Implements:[Options,Events],options:{elements:[],tabs:true,buttons:true,imageContainer:"ul",imageContainerSingle:"li",slideEffect:"slide",slideDuration:850,slideTransition:false,slideDirection:"x",slideSize:1,slideStep:"auto",slideStart:0,slideStartRandom:false,slideAuto:true,slideAutoInterval:6e3,slideAutoOnHoverIn:"stop",slideAutoOnHoverOut:"start",slideCallback:function(){},initCallback:function(){}},initialize:function(e){var t=this;this.setOptions(e);this.options.elements.each(function(e,n){t.initSlide(e)})},initSlide:function(e){var t=this;var n=e;this.slide=e;if(this.options.slideStep=="auto")this.options.slideStep=this.options.slideSize;n["options"]=this.options;n["slideAuto"]=this.options.slideAuto;n["slideDirectionXY"]=this.options.slideDirection=="y"?"y":"x";n["slideDirectionCSS1"]=this.options.slideDirection=="y"?"top":"left";n["slideDirectionCSS2"]=this.options.slideDirection=="y"?"height":"width";n["slideDirectionCSS3"]=this.options.slideDirection=="y"?"vertical":"horizontal";n["slideMode"]="strict";n["content"]=n.getElement(".fxContent");n["ul"]=n["content"].getElement(this.options.imageContainer);n["li"]=n["ul"].getElements(this.options.imageContainerSingle);n["liLength"]=n["li"].length;n["liFirstElement"]=n["li"][0].addClass("first");n["liLastElement"]=n["li"][n["liLength"]-1].addClass("last");n["imageDifferenceWidth"]=n["liFirstElement"].getStyle(this.options.slideDirection=="y"?"margin-bottom":"margin-right").toInt();n["liSize"]=n["liFirstElement"].getSize();n["liWidth"]=n["liSize"][n["slideDirectionXY"]]+n["imageDifferenceWidth"];n["liSteps"]=Math.ceil(n["liLength"]/this.options.slideSize);n["contentWidth"]=(n["liFirstElement"].getStyle("width").toInt()+n["imageDifferenceWidth"])*n["liLength"];n["contentOverflowWidth"]=n["liWidth"]*this.options.slideSize;n["buttons"]=(new Element("div",{"class":"fxButtons"})).inject(n["content"],"before");n["buttonsPrev"]=(new Element("a",{"class":"fxButtonsBtn fxPrev",text:"Prev"})).inject(n["buttons"]);n["buttonsNext"]=(new Element("a",{"class":"fxButtonsBtn fxNext",text:"Next"})).inject(n["buttons"]);n["navCurrent"]=this.options.slideStartRandom?0+parseInt(Math.random()*(n["liLength"]-this.options.slideSize+1)):this.options.slideStart;n["fx"]=new Fx.Tween(n["ul"],{duration:this.options.slideDuration,link:"chain",transition:this.options.slideTransition});n["tabs"]=n.getElement(".fxTabs")!=undefined?n.getElement(".fxTabs"):new Element("div",{"class":"fxTabs",html:"<ul></ul>"});switch(this.options.slideEffect){case"slide":break;case"alpha":break;default:break}if(n["slideDirectionXY"]=="y"){n["buttons"].setStyle("width",n["liSize"]["x"]+"px")}else{n["buttons"].setStyle("height",n["liSize"]["y"]+"px")}if(!this.options.tabs||n["liSteps"]<=1){n["tabs"].setStyle("display","none")}else if(this.options.tabs&&n["tabs"].getElement("ul li")==undefined){var r=n["liSteps"];n["tabs"].inject(n,"top");for(i=0;i<r;i++){(new Element("li",{html:"<a href='#'>"+(i+1)+"</a>"})).inject(n["tabs"].getElement("ul"))}}n["ul"].setStyle(n["slideDirectionCSS2"],n["contentWidth"]+"px");[n["content"],n["buttons"]].each(function(e,t){e.setStyle(n["slideDirectionCSS2"],n["contentOverflowWidth"]-n["imageDifferenceWidth"]+"px")});n["buttons"].setStyle("display",n["liSteps"]>1&&this.options.buttons?"block":"none");n["tabs"].setStyle("width",n["contentOverflowWidth"]-n["imageDifferenceWidth"]+"px");n.addClass(n["slideDirectionCSS3"]);n.addClass(this.options.slideEffect);if(this.options.buttons){n["buttonsPrev"].addEvent("click",this.prevSlide.bind(this));n["buttonsNext"].addEvent("click",this.nextSlide.bind(this))}else{n["buttons"].setStyle("display","none")}if(this.options.tabs&&n["tabs"]){var s=n["tabs"].getElements("li a").length>0?n["tabs"].getElements("li a"):n["tabs"].getElements("li");s.each(function(e,n){e.addEvents({click:function(){t.showSlide(t.varNavCurrent("strict",n))},focus:function(){this.blur()}})})}this.autoSlideEvents();this.autoSlideStart();this.options.initCallback(n);this.showSlide(n["navCurrent"],0)},autoSlideEvents:function(){var e=this;var t=this.slide;[t["buttons"],t["ul"],t["tabs"]].each(function(t,n){t.addEvent("mouseenter",function(){if(e.options.slideAutoOnHoverIn=="start"&&e.options.slideAutoOnHoverOut!="start"){e.autoSlideStart()}else if(e.options.slideAutoOnHoverIn=="stop"){e.autoSlideStop()}});t.addEvent("mouseleave",function(){if(e.options.slideAutoOnHoverOut=="start"&&e.options.slideAutoOnHoverIn!="start"){e.autoSlideStart()}else if(e.options.slideAutoOnHoverOut=="stop"){e.autoSlideStop()}})})},autoSlideStart:function(){var e=this.slide;if(e["slideAuto"]){this.autoSlideStop();e["slideAutoID"]=function(){if(this.options.slideAuto){this.nextSlide()}}.periodical(this.options.slideAutoInterval,this,e)}},autoSlideStop:function(){var e=this.slide;if(e["slideAuto"]){window.clearInterval(e["slideAutoID"])}},prevSlide:function(){this.showSlide(this.varNavCurrent("prev"),this.options.slideDuration)},nextSlide:function(){this.showSlide(this.varNavCurrent("next"),this.options.slideDuration)},showSlide:function(e,t){var n=this.slide;var r=t||t==0?t:this.options.slideDuration;var i=this.options.slideEffect;n["navCurrent"]=e;switch(i){case"slide":this.effectSlide(e,r,n);break;case"alpha":this.effectAlpha(e,r,n);break;default:this[i](n,e,r,i,n["slideMode"]);break}this.effectTabs(e,n);this.options.slideCallback(n,e,r,i,n["slideMode"])},effectTabs:function(e,t){if(this.options.tabs&&t["tabs"]){var n=Math.floor(t["navCurrent"]/this.options.slideSize);var r=t["tabs"].getElements("ul li");r.removeClass("active");if(r[n])r[n].addClass("active")}},effectSlide:function(e,t,n){n["fx"].options.duration=t;n["fx"].start(n["slideDirectionCSS1"],-n["li"][e].getPosition(n["ul"])[n["slideDirectionXY"]]+"px")},effectAlpha:function(e,t,n){},varNavCurrent:function(e,t){var n=this.slide;var r=r||r==0?t:n["navCurrent"];var i=this.options.slideSize;var s=this.options.slideStep;switch(e){case"prev":if(r==0){r=n["liLength"]-i}else if(r-s-1<0){r=0}else{r-=s}n["slideMode"]="prev";break;case"next":if(r==n["liLength"]-i){r=0}else if(r+s>n["liLength"]-i){r=n["liLength"]-i}else{r+=s}n["slideMode"]="next";break;case"strict":if(t==0){r=0}else if(t*s>n["liLength"]-i){r=n["liLength"]-s}else{r=t*s}n["slideMode"]="strict";break;default:break}return r}})